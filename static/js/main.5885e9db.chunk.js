(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),s=(n(30),n(6)),i=n.n(s),u=n(13),l=n(3),j=n(11),b=n(25),d=(n(32),n(33),n(1)),g=function(e){var t=e.children;return Object(d.jsx)("div",{className:"container",children:t})};n(35);var m=function(e){var t=e.onHandleSubmit,n=e.onSearchQueryChange,a=e.value;return Object(d.jsx)("header",{className:"header",children:Object(d.jsxs)("form",{className:"form",onSubmit:t,children:[Object(d.jsx)("button",{type:"submit",className:"btn",children:Object(d.jsx)("span",{className:"label",children:"Search"})}),Object(d.jsx)("input",{className:"input",type:"text",value:a,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:n})]})})},f=n(14),h=(n(36),n(23)),p=n.n(h),O=function(){var e=Object(j.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://pixabay.com/api/?q=".concat(t,"&page=").concat(n,"&key=20826404-6f4526022880cc6e23fc40539&image_type=photo&orientation=horizontal&per_page=12"));case 2:return a=e.sent,r=a.data,e.abrupt("return",r.hits);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=O;n(55);var x=function(e){var t=e.webformatURL,n=e.largeImageURL,a=e.tags,r=e.onOpenModal;return Object(d.jsx)("li",{className:"item",children:Object(d.jsx)("img",{src:t,alt:a,"data-source":n,className:"image",onClick:r})})};n(56);var w=function(e){var t=e.images,n=e.onOpenModal;return Object(d.jsx)("ul",{className:"gallery-list",children:t.map((function(e){var t=e.id,a=e.webformatURL,r=e.largeImageURL,c=e.tags;return Object(d.jsx)(x,{webformatURL:a,largeImageURL:r,tags:c,onOpenModal:n},t)}))})};n(57);var y=function(e){var t=e.onLoadMore;return Object(d.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})},L=n(24),k=n.n(L);n(78),n(79);var N=function(){return Object(d.jsx)("div",{className:"overlay",children:Object(d.jsx)(k.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:0})})},M=(n(80),document.querySelector("#modal-root"));var R=function(e){var t=e.onToggleModal,n=e.largeImageURL,r=function(e){console.log("pooiu"),"Escape"===e.code&&t()};return Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}})),Object(c.createPortal)(Object(d.jsx)("div",{className:"overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("img",{src:n,alt:""})})}),M)},U=n.p+"static/media/mistakes.b9d2c1b9.jpg";n(81);var S=function(e){var t=e.texterror;return Object(d.jsxs)("div",{role:"alert",className:"wrapper",children:[Object(d.jsx)("img",{src:U,width:"550",alt:"mistakes"}),Object(d.jsx)("p",{text:t,className:"text",children:t})]})};var I=function(){var e=Object(a.useState)({query:"",images:[],largeImageURL:"",page:1,error:null,isLoading:!1,showModal:!1}),t=Object(b.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[n.page]);var c=function(){var e=Object(j.a)(i.a.mark((function e(){var t,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,a=n.page,""!==t.trim()){e.next=3;break}return e.abrupt("return",f.b.info(" Please enter search query..."));case 3:return o(),e.prev=4,e.next=7,v(t,a);case 7:c=e.sent,r((function(e){return Object(l.a)(Object(l.a)({},e),{},{images:[].concat(Object(u.a)(e.images),Object(u.a)(c)),page:e.page+1})})),0===c.length&&r((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:"No results were found for ".concat(t,"!")})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:"Ooops... something went wrong. Try again."})}));case 15:return e.prev=15,o(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),o=function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!e.isLoading})}))},s=function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{showModal:!e.showModal})}))},h=n.query,p=n.images,O=n.largeImageURL,x=n.isLoading,L=n.showModal,k=n.error;return Object(d.jsxs)(g,{children:[Object(d.jsx)(m,{onHandleSubmit:function(e){e.preventDefault(),r((function(e){return Object(l.a)(Object(l.a)({},e),{},{images:[],page:1,error:null})})),c()},onSearchQueryChange:function(e){r((function(t){return Object(l.a)(Object(l.a)({},t),{},{query:e.target.value})}))},value:h}),k&&Object(d.jsx)(S,{texterror:k}),p.length>0&&Object(d.jsx)(w,{images:p,onOpenModal:function(e){r((function(t){return Object(l.a)(Object(l.a)({},t),{},{largeImageURL:e.target.dataset.source})})),s()}}),x&&Object(d.jsx)(N,{}),!x&&p.length>0&&Object(d.jsx)(y,{onLoadMore:function(){c()}}),L&&Object(d.jsx)(R,{onToggleModal:s,largeImageURL:O}),Object(d.jsx)(f.a,{autoClose:3700})]})};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.5885e9db.chunk.js.map